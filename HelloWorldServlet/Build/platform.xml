<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="all" name="Platform">

	<property name="dest" value="./package" />

	<target name="package">
		<delete dir="${dest}" />
		<mkdir dir="${dest}" />

		<!-- copy the libs -->
		<mkdir dir="${dest}/Libs" />
		<copy todir="${dest}/Libs">
			<fileset dir="../Libs">
				<include name="**/*.jar" />
			</fileset>
		</copy>

		<!-- copy the classpath -->
		<copyfile src="../AppServer/classpath.txt" dest="${dest}/appserver_classpath.txt" />
		<copyfile src="../Controller/classpath.txt" dest="${dest}/controller_classpath.txt" />
		<copyfile src="../Master/classpath.txt" dest="${dest}/master_classpath.txt" />
		<copyfile src="../Frontend/classpath.txt" dest="${dest}/frontend_classpath.txt" />
		<copyfile src="../HttpFileServer/classpath.txt" dest="${dest}/httpserver_classpath.txt" />

		<!-- copy the python script with the bootstrap routines -->
		<copyfile src="./start.py" dest="${dest}/start.py" />
	</target>

	<target name="mkcp">
		<ant antfile="../Util/build.xml" dir="../Util/" target="mkcp" />
		<ant antfile="../Controller/build.xml" dir="../Controller/" target="mkcp" />
		<ant antfile="../Master/build.xml" dir="../Master/" target="mkcp" />
		<ant antfile="../Frontend/build.xml" dir="../Frontend/" target="mkcp" />
		<ant antfile="../AppServer/build.xml" dir="../AppServer/" target="mkcp" />
		<ant antfile="../HttpFileServer/build.xml" dir="../HttpFileServer/" target="mkcp" />
	</target>

	<target name="build">
		<ant antfile="../Util/build.xml" dir="../Util/" />
		<ant antfile="../Controller/build.xml" dir="../Controller/" />
		<ant antfile="../Master/build.xml" dir="../Master/" />
		<ant antfile="../Frontend/build.xml" dir="../Frontend/" />
		<ant antfile="../AppServer/build.xml" dir="../AppServer/" />
		<ant antfile="../HttpFileServer/build.xml" dir="../HttpFileServer/" />
	</target>

	<target name="all" depends="build,package" />

</project>